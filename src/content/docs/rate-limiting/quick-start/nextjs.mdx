---
title: "Rate limiting for Next.js"
description: "Quick start guide for adding rate limiting to your Next.js app."
---

import {
  CardGrid,
  Code,
  LinkCard,
  TabItem,
  Tabs,
} from "@astrojs/starlight/components";
import { YouTube } from "astro-embed";
import FAQs from "/src/components/FAQs.astro";
import WhatIsArcjet from "/src/components/WhatIsArcjet.astro";
import Step3AppJS from "/src/content/docs/rate-limiting/quick-start/snippets/nextjs/Step3App.js?raw";
import Step3AppTS from "/src/content/docs/rate-limiting/quick-start/snippets/nextjs/Step3App.ts?raw";
import Step3PagesJS from "/src/content/docs/rate-limiting/quick-start/snippets/nextjs/Step3Pages.js?raw";
import Step3PagesTS from "/src/content/docs/rate-limiting/quick-start/snippets/nextjs/Step3Pages.ts?raw";

Arcjet rate limiting allows you to define rules which limit the number of
requests a client can make over a period of time.

<WhatIsArcjet />

## Video quick start

<YouTube
  id="umEz1JrmiOc"
  title="Rate limiting & bot detection for Next.js in 10 mins"
/>

## Quick start

This guide will show you how to add a simple rate limit to your Next.js app.

### 1. Install Arcjet

In your project root, run the following command to install the SDK:

{/* prettier-ignore */}
<Tabs>
<TabItem label="npm">
```sh
npm i @arcjet/next
```
</TabItem>
<TabItem label="pnpm">
```sh
pnpm add @arcjet/next
```
</TabItem>
<TabItem label="yarn">
```sh
yarn add @arcjet/next
```
</TabItem>
</Tabs>

### 2. Set your key

[Create a free Arcjet account](https://app.arcjet.com) then follow the
instructions to add a site and get a key. Add it to a `.env.local` file in your
Next.js project root:

```ini title=".env.local"
ARCJET_KEY=ajkey_yourkey
```

### 3. Add a rate limit to a route

The example below applies a token bucket rate limit rule to a route where we
identify the user based on their ID e.g. if they are logged in. The bucket is
configured with a maximum capacity of 10 tokens and refills by 5 tokens every
10 seconds. Each request consumes 5 tokens.

<Tabs>
<TabItem label="TS (App)">
Create a new API route at `/app/api/arcjet/route.ts`:

<Code
  code={Step3AppTS}
  lang="ts"
  title="/app/api/arcjet/route.ts"
  mark={["ARCJET_KEY"]}
/>

</TabItem>
<TabItem label="TS (Pages)">
Create a new API route at `/pages/api/arcjet.ts`:

<Code
  code={Step3PagesTS}
  lang="ts"
  title="/pages/api/arcjet.ts"
  mark={["ARCJET_KEY"]}
/>

</TabItem>
<TabItem label="JS (App)">
Create a new API route at `/app/api/arcjet/route.js`:

<Code
  code={Step3AppJS}
  lang="js"
  title="/app/api/arcjet/route.js"
  mark={["ARCJET_KEY"]}
/>

</TabItem>
<TabItem label="JS (Pages)">
Create a new API route at `/pages/api/arcjet.js`:

<Code
  code={Step3PagesJS}
  lang="js"
  title="/pages/api/arcjet.js"
  mark={["ARCJET_KEY"]}
/>

</TabItem>
</Tabs>

### 4. Start app

Start your app and load `http://localhost:3000/api/arcjet`. Refresh the page and
you will see the rate limit in action. The requests will also show up in the
[Arcjet dashboard](https://app.arcjet.com).

## FAQs

<FAQs />

## What next?

<CardGrid>
  <LinkCard
    title="Example apps"
    href="https://github.com/arcjet/arcjet-js/tree/main/examples/nextjs-14-openai"
    description="Check out the Next.js example."
  ></LinkCard>
  <LinkCard
    title="Rate limit algorithms"
    href="/rate-limiting/algorithms"
    description="Learn which algorithm to use."
  ></LinkCard>
  <LinkCard
    title="Rate limiting reference"
    href="/rate-limiting/reference/nextjs"
    description="Full details about rate limiting."
  ></LinkCard>
</CardGrid>

## Get help

Need help with anything? Email support@arcjet.com to get support from our
engineering team.
