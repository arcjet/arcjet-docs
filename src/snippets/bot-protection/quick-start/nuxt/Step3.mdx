import { Code } from "@astrojs/starlight/components";
import SelectableContent from "@/components/SelectableContent";
import { removeTSCCommentDirectives } from "@/lib/utils";

import Step3RouteTS from "@repo/nuxt/server/api/bot-protection/GetStarted.get.ts?raw";
import Step3RouteJS from "@repo/nuxt/server/api/bot-protection/GetStarted.get.js?raw";

The example below will return a 403 Forbidden response for all requests from
clients we are sure are automated.

<SelectableContent client:load syncKey="language">
  <Fragment slot="TS" slotIdx="1">
    Create a new server route at `server/api/protected.get.ts`:
    <Code
      code={removeTSCCommentDirectives(Step3RouteTS)}
      lang="ts"
      title="server/api/protected.get.ts"
    />
  </Fragment>
  <Fragment slot="JS" slotIdx="2">
    Create a new server route at `server/api/protected.get.js`:
    <Code
      code={removeTSCCommentDirectives(Step3RouteJS)}
      lang="js"
      title="server/api/protected.get.js"
    />
  </Fragment>
</SelectableContent>
