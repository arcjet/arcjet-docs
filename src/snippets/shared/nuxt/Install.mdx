import { Code } from "@astrojs/starlight/components";
import SelectableContent from "@/components/SelectableContent";
import { removeTSCCommentDirectives } from "@/lib/utils";

import ConfigurationTS from "@/snippets/reference/nuxt/Configuration.ts?raw";

{/* prettier-ignore */}
<SelectableContent client:load syncKey="packageManager" frameworkSwitcher={props.showFrameworkSwitcher ?? true}>
    <Fragment slot="npm" slotIdx="1">

    ```sh
    npx nuxt add @arcjet/nuxt
    ```

    </Fragment>
    <Fragment slot="pnpm" slotIdx="2">

    ```sh
    pnpm nuxt add @arcjet/nuxt
    ```

    </Fragment>
    <Fragment slot="yarn" slotIdx="3">

    ```sh
    yarn nuxt add @arcjet/nuxt
    ```

    </Fragment>

</SelectableContent>

This automatically installs and configures the Arcjet Nuxt integration in your
project. Learn more about how this works in the
[Nuxt docs](https://nuxt.com/docs/4.x/api/commands/add). Alternatively, you can
follow the manual installation instructions.

<details>
    <summary>Manual installation instruction</summary>
    In your project root, run the following command:

    {/* prettier-ignore */}
    <SelectableContent client:load syncKey="packageManager" frameworkSwitcher={props.showFrameworkSwitcher ?? true}>
    <Fragment slot="npm" slotIdx="1">

    ```sh
    npm install @arcjet/nuxt
    ```

    </Fragment>
    <Fragment slot="pnpm" slotIdx="2">

    ```sh
    pnpm add @arcjet/nuxt
    ```

    </Fragment>
    <Fragment slot="yarn" slotIdx="3">

    ```sh
    yarn add @arcjet/nuxt
    ```

    </Fragment>
    </SelectableContent>

    Update your Nuxt configuration file:

    <Code code={removeTSCCommentDirectives(ConfigurationTS)} lang="ts" title="nuxt.config.ts" />

</details>
